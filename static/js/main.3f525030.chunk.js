(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{110:function(e,t,n){e.exports=n(242)},239:function(e,t,n){},240:function(e,t,n){},242:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(103),i=n.n(c),o=n(5),s=n(12),u=n(105),l=n(7),m=n(8),p=n(10),d=n(9),v=n(11),g=n(247),b=n(248),f=n(249),h=n(245),E=n(13),y=n(14),O=n.n(y),N=n(21),S=n(106),j=n.n(S).a.create({baseURL:"https://not-buggy-skipe.herokuapp.com"}),w=n(17),_=n.n(w),I=n(107),k=n.n(I)()(),C=function(){return{type:"IS_EDIT_PROFILE"}},x=function(){return{type:"TOGGLE_SHOW_INVITES"}},T=function(){return{type:"TOGGLE_SEND_INVITE_FORM"}},U=function(){return{type:"TOGGLE_ADD_CONTACTS"}},A=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e;return e=this.props.isSignedIn?"/main":"/",r.a.createElement("div",null,r.a.createElement(h.a,{to:e},r.a.createElement("h1",{style:{color:"red",textShadow:"#CCC 1px 0 10px"}},"TwoChat")),r.a.createElement("div",{className:"ui borderless menu"},this.props.isSignedIn?r.a.createElement(h.a,{to:"/main",className:"item"},"Home"):r.a.createElement(h.a,{to:"/login",className:"item"},"Login"),r.a.createElement(h.a,{to:"/about",className:"item"},"About"),r.a.createElement(h.a,{to:"/contact",className:"item"},"Contact"),r.a.createElement("div",{className:"right menu"},r.a.createElement("div",{className:"item"},this.props.isSignedIn?r.a.createElement("button",{onClick:this.props.logout,className:"ui red button"},"Logout"):r.a.createElement(h.a,{to:"/signup",className:"ui green button"},"Sign Up")))))}}]),t}(a.Component),R=Object(o.b)(function(e){return{isSignedIn:e.auth.isSignedIn}},{logout:function(){return k.push("/"),localStorage.clear(),{type:"LOGOUT"}}})(A),F=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){if(this.props.username){var e=this.props,t=e.username,n=e.city,a=e.country,c=e.image_url;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"image"},r.a.createElement("img",{src:c,alt:"".concat(t)})),r.a.createElement("div",{className:"content"},r.a.createElement("button",{className:"ui right floated icon button",onClick:this.props.isEditingProfile},r.a.createElement("i",{className:"edit icon"})),r.a.createElement("div",{className:"header"},r.a.createElement("h2",null,t)),r.a.createElement("div",{className:"description"},r.a.createElement("p",null,"".concat(n,", ").concat(a)))))}return null}}]),t}(a.Component),G=n(244),V=n(243),L=function(e){var t=e.input,n=e.label,a=e.meta,c=e.type,i="field ".concat(a.error&&a.touched?"error":"");return r.a.createElement("div",{className:i},r.a.createElement("label",null,n),r.a.createElement("input",Object.assign({},t,{placeholder:n,type:c})),r.a.createElement("div",null,function(e){var t=e.error,n=e.touched;if(t&&n)return r.a.createElement("div",{className:"ui error"},r.a.createElement("div",{className:"header"},t))}(a)))},P=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(n=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(c)))).onSubmit=function(e){var t=n.props.currentUser;n.props.submitProfileChanges(t,e)},n.renderForm=function(e){var t=e.email,a=e.username,c=e.city,i=e.country,o=e.image_url;return r.a.createElement("div",null,r.a.createElement("form",{className:"ui form error",onSubmit:n.props.handleSubmit(n.onSubmit)},r.a.createElement(G.a,{name:"email",label:"email",component:L,value:t}),r.a.createElement(G.a,{name:"username",label:"username",component:L,value:a}),r.a.createElement(G.a,{name:"city",label:"city",component:L,value:c}),r.a.createElement(G.a,{name:"country",label:"country",component:L,value:i}),r.a.createElement(G.a,{name:"image_url",label:"image url",component:L,value:o}),r.a.createElement("button",{className:"ui green button",type:"submit"},"Submit"),r.a.createElement("button",{className:"ui right floated button",onClick:n.props.isEditingProfile},"Cancel")))},n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.currentUser;return r.a.createElement("div",{className:"ui raised padded text container segment"},r.a.createElement("h1",null,"Profile"),this.renderForm(e))}}]),t}(a.Component),B=Object(V.a)({form:"editProfileForm",validate:function(e){var t=e.email,n=e.username,a=e.city,r=e.country,c=e.image_url,i={};return t||(i.email="You must enter an email"),n||(i.username="You must enter a username"),a||(i.city="You must enter a city"),r||(i.country="You must enter a country"),c||(i[c]="You must enter an image url."),i}})(P),M=Object(o.b)(function(e){return{currentUser:e.auth.currentUser,initialValues:e.auth.currentUser}},{submitProfileChanges:function(e,t){return function(){var n=Object(N.a)(O.a.mark(function n(a){var r,c,i,o,s,u,l,m,p,d,v;return O.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.email,c=t.username,i=t.city,o=t.country,s=t.image_url,u=localStorage.token,l=Object(E.a)({},e,{email:r,username:c,city:i,country:o,image_url:s}),m={},d={headers:{Authorization:"Bearer ".concat(u)}},n.prev=5,n.next=8,j.patch("/api/v1/profile",{user:Object(E.a)({},l),headers:{"Content-Type":"application/json"}},d);case 8:m=n.sent,p=m.data.user,_()("Success!","Your account has been successfully updated.","success"),n.next=17;break;case 13:n.prev=13,n.t0=n.catch(5),m={error:n.t0.message},_()("Profile update failed.","".concat(m.error),"error");case 17:return v=function(e){e({type:"SUBMIT_PROFILE_CHANGES",payload:p}),e({type:"GET_USER_INFO",payload:p})},n.abrupt("return",a(v));case 19:case"end":return n.stop()}},n,this,[[5,13]])}));return function(e){return n.apply(this,arguments)}}()},isEditingProfile:C})(B),D={marginTop:"90px",marginBottom:"80px",marginLeft:"20px",color:"rgb(245, 194, 194)",textShadow:"2px 2px 4px grey"},Y=function(e){return r.a.createElement("div",{className:"card",onClick:e.toggleShowInvites},r.a.createElement("div",{className:"image"},r.a.createElement("i",{className:"massive envelope outline icon",style:D})))},z=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(n=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(c)))).renderInvite=function(e,t,a){var c=t.image_url,i=t.username;return r.a.createElement("div",{className:"column",key:a.id},r.a.createElement("div",{className:"ui segment"},r.a.createElement("div",{className:"content"},r.a.createElement("div",null,r.a.createElement("h2",{className:"ui top attached header"},r.a.createElement("img",{className:"ui circular image",src:c,alt:i}),i)),r.a.createElement("div",{className:"ui attached segment"},r.a.createElement("p",{style:{textAlign:"center",textOverflow:"clip"}},a.name)),r.a.createElement("div",{className:"ui two bottom attached buttons"},r.a.createElement("button",{className:"ui float right green button",onClick:function(){return n.props.startMeeting(n.props.currentUser,a.id)}},"Start"),r.a.createElement("button",{className:"ui red button",invite_id:e,onClick:function(){return n.props.deleteInvite(e,n.props.currentUser.id)}},"Cancel")))))},n.renderReceivedInvites=function(e){return r.a.createElement("div",{className:"ui four column grid"},e.map(function(e){return n.renderInvite(e.id,e.sender,e.room)}))},n.renderSentInvites=function(e){return r.a.createElement("div",{className:"ui four column grid"},e.map(function(e){return n.renderInvite(e.id,e.receiver,e.room)}))},n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.currentUser,t=e.received_invites,n=e.sent_invites;return r.a.createElement("div",{className:"ui raised padded container segment"},r.a.createElement("div",null,r.a.createElement("h1",null,"Invites"),r.a.createElement("br",null),r.a.createElement("div",{className:"container"},r.a.createElement("h4",null,"RECEIVED"),r.a.createElement("div",{className:"ui stackable divided grid"},this.renderReceivedInvites(t)),r.a.createElement("h4",null,"SENT"),r.a.createElement("br",null),r.a.createElement("div",{className:"ui stackable divided grid"},this.renderSentInvites(n)),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("button",{className:"ui right floated button",onClick:this.props.toggleShowInvites},"Close"),r.a.createElement("br",null),r.a.createElement("br",null)))}}]),t}(a.Component),q=Object(o.b)(function(e){return{currentUser:e.auth.currentUser}},{startMeeting:function(e,t){return function(){var n=Object(N.a)(O.a.mark(function n(a){var r,c,i,o,s,u;return O.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=Object(E.a)({},e,{meeting_id:t}),c={},o=localStorage.token,s={headers:{Authorization:"Bearer ".concat(o)}},n.prev=4,n.next=7,j.patch("/api/v1/profile",{user:r,headers:{"Content-Type":"application/json"}},s);case 7:c=n.sent,i=c.data.user,n.next=15;break;case 11:n.prev=11,n.t0=n.catch(4),c={error:n.t0.message},_()("Meeting entrance failed.","".concat(c.error),"error");case 15:return u=function(e){e({type:"GET_USER_INFO",payload:i}),e({type:"START_MEETING"})},n.abrupt("return",a(u));case 17:case"end":return n.stop()}},n,this,[[4,11]])}));return function(e){return n.apply(this,arguments)}}()},toggleShowInvites:x,deleteInvite:function(e,t){return function(){var n=Object(N.a)(O.a.mark(function n(a){var r,c,i;return O.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=localStorage.token,c={},n.prev=2,n.next=5,j.delete("/api/v1/invites",{data:{invite:{id:e,user_id:t}},headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}});case 5:c=n.sent,i=c.data.user,n.next=13;break;case 9:n.prev=9,n.t0=n.catch(2),c={error:n.t0.message},_()("Invitation failed to delete.","".concat(c.error),"error");case 13:a({type:"GET_USER_INFO",payload:i});case 14:case"end":return n.stop()}},n,this,[[2,9]])}));return function(e){return n.apply(this,arguments)}}()}})(z),H=(n(239),function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.currentUser.meeting_room;return this.props.currentUser&&e?r.a.createElement("div",{className:"ui raised padded container segment",style:{paddingBottom:"9%"}},r.a.createElement("h2",null,e.name),r.a.createElement("div",{className:"iframe-container"},r.a.createElement("iframe",{src:"https://tokbox.com/embed/embed/ot-embed.js?embedId=cb6af7f6-5ac4-4691-9850-07636964bfb7&room=".concat(e.name,"&iframe=true"),title:e.name,allow:"microphone; camera",scrolling:"no"})),r.a.createElement("button",{className:"ui right floated red button",style:{marginTop:"2%"},onClick:this.props.endMeeting},"End")):null}}]),t}(a.Component)),J=Object(o.b)(function(e){return{currentUser:e.auth.currentUser}},{endMeeting:function(){return{type:"END_MEETING"}}})(H),W={marginTop:"90px",marginBottom:"80px",marginLeft:"20px",color:"rgb(245, 194, 194)",textShadow:"2px 2px 4px grey"},K=function(e){return r.a.createElement("div",{className:"card",onClick:e.toggleViewAddressBook},r.a.createElement("div",{className:"image"},r.a.createElement("i",{className:"massive address book outline icon",style:W})))},Q={fontSize:"36px",marginTop:"30px"},X=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(n=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(c)))).getUniqueContacts=function(){var e=n.props.user.contacts.map(function(e){return e.user_2}),t=e.map(function(e){return e.id}),a=[];return t.forEach(function(e){return!1===a.includes(e)?a.push(e):null}),a.map(function(t){return e.find(function(e){return e.id===t})})},n.renderContacts=function(e){return e.map(function(e){var t=e.user_2,a=t.username,c=t.image_url;return r.a.createElement("div",{className:"card",key:e.id},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"description",style:Q},a),r.a.createElement("img",{className:"ui floated right tiny image",src:c,alt:a})),r.a.createElement("div",{className:"extra content"},r.a.createElement("div",{className:"ui two buttons"},r.a.createElement("div",{className:"ui basic green button",onClick:function(){n.props.setInviteReceiver(t),n.props.toggleSendInviteForm()}},"Send Invite"),r.a.createElement("div",{className:"ui basic red button",onClick:function(){return n.props.deleteContact(e.id)}},"Delete"))))})},n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.contacts;return r.a.createElement("div",{className:"ui raised padded container segment"},r.a.createElement("h1",null,"AddressBook"),r.a.createElement("button",{className:"circular ui right floated icon button",style:{marginTop:"-45px",marginRight:"5px"},onClick:this.props.toggleAddContacts},r.a.createElement("i",{className:"plus icon"})),r.a.createElement("div",{className:"ui cards"},this.renderContacts(e)),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{className:"ui right floated button",onClick:this.props.toggleViewAddressBook,style:{marginTop:"-35px"}},"Close"))}}]),t}(a.Component),Z=Object(o.b)(function(e){return{user:e.auth.currentUser}},{deleteContact:function(e){return function(){var t=Object(N.a)(O.a.mark(function t(n){var a,r,c;return O.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=localStorage.token,r={},t.prev=2,t.next=5,j.delete("/api/v1/contacts",{data:{contact:{id:e}},headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}});case 5:r=t.sent,c=r.data.user,t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),r={error:t.t0.message},_()("Contact failed to delete.","".concat(r.error),"error");case 13:n({type:"GET_USER_INFO",payload:c});case 14:case"end":return t.stop()}},t,this,[[2,9]])}));return function(e){return t.apply(this,arguments)}}()},setInviteReceiver:function(e){return{type:"SET_INVITE_RECEIVER",payload:e}},toggleAddContacts:U})(X),$=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(n=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(c)))).onSubmit=function(e){var t=n.props.user.id,a=n.props.content.inviteReceiver.id,r=e.roomName,c=e.message||"";n.props.sendInvite({sender_id:t,receiver_id:a,room_name:r,content:c})},n.renderForm=function(){return r.a.createElement("form",{className:"ui form error",onSubmit:n.props.handleSubmit(n.onSubmit)},r.a.createElement(G.a,{name:"roomName",label:"room name",component:L,type:"text"}),r.a.createElement(G.a,{name:"message",label:"message *(optional)",component:L,type:"text"}),r.a.createElement("button",{className:"ui green button",type:"submit"},"Submit"),r.a.createElement("button",{className:"ui right floated button",onClick:n.props.toggleSendInviteForm},"Cancel"))},n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){if(this.props.user){var e=this.props.content.inviteReceiver;return r.a.createElement("div",{className:"ui raised padded text containe segment"},r.a.createElement("h2",null,"Invite to ",e.username),this.renderForm())}return r.a.createElement("div",null,"SendInviteForm")}}]),t}(a.Component),ee=Object(V.a)({form:"sendInviteForm",validate:function(e){var t={};return e.roomName||(t.roomName="You must enter a unique room name."),t}})($),te=Object(o.b)(function(e){return{user:e.auth.currentUser,content:e.content}},{toggleSendInviteForm:T,sendInvite:function(e){var t=e.sender_id,n=e.receiver_id,a=e.room_name,r=e.content;return function(){var e=Object(N.a)(O.a.mark(function e(c){var i,o,s,u;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=localStorage.token,o={},e.prev=2,e.next=5,j.post("/api/v1/invites",{invite:{sender_id:t,receiver_id:n,room_name:a,content:r}},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i)}});case 5:o=e.sent,_()("Success!","Your invitation has been sent.","success"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),o={error:e.t0.message},_()("Invite creation failed","Please be sure that your room name is unique. Note that no message is required.","error");case 13:return s=o.data.user,u=function(e){e({type:"TOGGLE_SEND_INVITE_FORM"}),e({type:"GET_USER_INFO",payload:s})},e.abrupt("return",c(u));case 16:case"end":return e.stop()}},e,this,[[2,9]])}));return function(t){return e.apply(this,arguments)}}()}})(ee),ne=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(n=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(c)))).getPossibleContacts=function(){var e=n.getOwnUniqueContacts(),t=n.props.user.id,a=n.props.allUsers,r=e.map(function(e){return e.id});return a.filter(function(e){return!1===r.includes(e.id)&&e.id!==t})},n.getOwnUniqueContacts=function(){var e=n.props.user.contacts.map(function(e){return e.user_2}),t=e.map(function(e){return e.id}),a=[];return t.forEach(function(e){return!1===a.includes(e)?a.push(e):null}),a.map(function(t){return e.find(function(e){return e.id===t})})},n.renderPossibleContacts=function(){var e=n.props.user;return n.props.allUsers?n.getPossibleContacts().map(function(t){return r.a.createElement("div",{className:"item",key:t.id},r.a.createElement("div",{className:"right floated content"},r.a.createElement("button",{className:"ui right floated green button",onClick:function(){return n.props.addContact(e.id,t.id)}},"Add")),r.a.createElement("img",{className:"ui avatar image",src:t.image_url,alt:t.username}),r.a.createElement("div",{className:"content"},t.username))}):r.a.createElement("div",{className:"ui active centered inline loader"})},n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchAllUsers()}},{key:"render",value:function(){return r.a.createElement("div",{className:"ui raised padded container segment"},r.a.createElement("h2",null,"Add Contacts"),r.a.createElement("div",{className:"ui middle aligned divided list"},this.renderPossibleContacts(),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("button",{className:"ui right floated button",style:{marginTop:"-35px"},onClick:this.props.toggleAddContacts},"Close"))}}]),t}(a.Component),ae=Object(o.b)(function(e){return{allUsers:e.content.allUsers,user:e.auth.currentUser}},{toggleAddContacts:U,fetchAllUsers:function(){return function(){var e=Object(N.a)(O.a.mark(function e(t){var n,a,r;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={},r=localStorage.token,e.prev=2,e.next=5,j.get("/api/v1/users",{headers:{Authorization:"Bearer ".concat(r)}});case 5:n=e.sent,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),n={error:e.t0.message},_()("Fetch all users failed","".concat(n.error),"error");case 12:a=n.data,t({type:"SET_ALL_USERS",payload:a});case 14:case"end":return e.stop()}},e,this,[[2,8]])}));return function(t){return e.apply(this,arguments)}}()},addContact:function(e,t){return function(){var n=Object(N.a)(O.a.mark(function n(a){var r,c,i,o,s,u;return O.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r={},c={},s=localStorage.token,n.prev=3,n.next=6,j.post("/api/v1/contacts",{contact:{user_1_id:e,user_2_id:t}},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}});case 6:r=n.sent,_()("Success!","Your have added a new contact.","success"),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(3),r={error:n.t0.message},_()("Failed to add contact.","".concat(r.error),"error");case 14:return i=r.data.user,n.prev=15,n.next=18,j.get("/api/v1/users",{headers:{Authorization:"Bearer ".concat(s)}});case 18:c=n.sent,o=c.data,n.next=26;break;case 22:n.prev=22,n.t1=n.catch(15),c={error:n.t1.message},_()("Fetch all users failed","".concat(c.error),"error");case 26:return u=function(e){e({type:"GET_USER_INFO",payload:i}),e({type:"SET_ALL_USERS",payload:o})},n.abrupt("return",a(u));case 28:case"end":return n.stop()}},n,this,[[3,10],[15,22]])}));return function(e){return n.apply(this,arguments)}}()}})(ne),re=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){if(this.props.user){var e=this.props.user,t=e.username,n=e.city,a=e.country,c=e.image_url,i=e.contacts,o=this.props.content,s=o.isEditing,u=o.isViewingInvites,l=o.isStartingMeeting,m=o.isViewingAddressBook,p=o.isViewingSendInviteForm,d=o.isViewingAddContacts;return l?r.a.createElement(J,null):s?r.a.createElement(M,null):u?r.a.createElement(q,{user:this.props.user}):m?r.a.createElement(Z,{toggleViewAddressBook:this.props.toggleViewAddressBook,contacts:i,toggleSendInviteForm:this.props.toggleSendInviteForm}):p?r.a.createElement(te,null):d?r.a.createElement(ae,null):r.a.createElement("div",{className:"ui raised padded text container segment"},r.a.createElement("div",{className:"ui three stackable cards"},r.a.createElement(F,{username:t,city:n,country:a,image_url:c,isEditingProfile:this.props.isEditingProfile}),r.a.createElement(Y,{toggleShowInvites:this.props.toggleShowInvites}),r.a.createElement(K,{toggleViewAddressBook:this.props.toggleViewAddressBook})))}return null}}]),t}(a.Component),ce=Object(o.b)(function(e){return{user:e.auth.currentUser,content:e.content}},{isEditingProfile:C,toggleShowInvites:x,toggleViewAddressBook:function(){return{type:"TOGGLE_VIEW_ADDRESS_BOOK"}},toggleSendInviteForm:T})(re),ie=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(n=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(c)))).onSubmit=function(e){n.props.login(e)},n.renderForm=function(){return r.a.createElement("form",{className:"ui form error",onSubmit:n.props.handleSubmit(n.onSubmit)},r.a.createElement(G.a,{name:"username",label:"username",component:L,type:"text"}),r.a.createElement(G.a,{name:"password",label:"password",component:L,type:"password"}),r.a.createElement("button",{className:"ui green button",type:"submit"},"Submit"))},n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"ui raised padded text container segment"},r.a.createElement("h2",null,"Login"),this.renderForm())}}]),t}(a.Component),oe=Object(V.a)({form:"loginForm",validate:function(e){var t={};return e.username||(t.username="You must enter a username"),e.password||(t.password="You must enter a password"),t}})(ie),se=Object(o.b)(null,{login:function(e){var t=e.username,n=e.password;return function(){var e=Object(N.a)(O.a.mark(function e(a){var r,c;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,j.post("/api/v1/login",{user:{username:t,password:n},headers:{"Content-Type":"application/json"}});case 4:r=e.sent,e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),r={error:e.t0.message},_()("Invalid credentials","Invalid username and/or password. Please try again.","error");case 11:!(c=r.data).error&&c.jwt.length>0&&(localStorage.token=c.jwt),a({type:"LOGIN",payload:c}),k.push("/main");case 15:case"end":return e.stop()}},e,this,[[1,7]])}));return function(t){return e.apply(this,arguments)}}()}})(oe),ue=function(){return r.a.createElement("div",{className:"ui raised padded text container segment inverse"},r.a.createElement("h2",{className:"ui header"},"About"),r.a.createElement("div",null,r.a.createElement("p",null,"This is a one-on-one video chat app, created by ",r.a.createElement("a",{href:"https://github.com/e-barr"},"e-barr"),"."),r.a.createElement("p",null,"To get started, please login or sign up using the links above.")))},le=function(){return r.a.createElement("div",{className:"ui raised padded text container segment"},r.a.createElement("h2",{className:"ui header"},"Contact"),r.a.createElement("p",null,"If you have any questions, please feel free to contact me at ",r.a.createElement("a",{href:"https://github.com/e-barr"},"e-barr"),". If a video demo is more convenient, please feel free to visit the following youtube link: ",r.a.createElement("a",{href:"https://www.youtube.com/watch?v=JCo-uO7zeHQ&t=20s"},"https://www.youtube.com/watch?v=JCo-uO7zeHQ&t=20s"),"."))},me=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(n=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(c)))).onSubmit=function(e){n.props.signUp(e)},n.renderForm=function(){return r.a.createElement("form",{className:"ui form error",onSubmit:n.props.handleSubmit(n.onSubmit)},r.a.createElement(G.a,{name:"email",label:"email",component:L,type:"text"}),r.a.createElement(G.a,{name:"username",label:"username",component:L,type:"text"}),r.a.createElement(G.a,{name:"password",label:"password",component:L,type:"password"}),r.a.createElement(G.a,{name:"confirmPassword",label:"confirm password",component:L,type:"password"}),r.a.createElement(G.a,{name:"city",label:"city",component:L,type:"text"}),r.a.createElement(G.a,{name:"country",label:"country",component:L,type:"text"}),r.a.createElement(G.a,{name:"image_url",label:"image url",component:L,type:"text"}),r.a.createElement("button",{className:"ui button",type:"submit"},"Submit"))},n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"ui raised padded text container segment"},r.a.createElement("h1",null,"Sign Up"),this.renderForm())}}]),t}(a.Component),pe=Object(V.a)({form:"signUpForm",validate:function(e){var t=e.email,n=e.username,a=e.password,r=e.confirmPassword,c=e.city,i=e.country,o=e.image_url,s={};return t||(s.email="You must enter an email"),n||(s.username="You must enter a username"),a||(s.password="You must enter a password"),a!==r&&(s.confirmPassword="Your passwords do not match"),c||(s.city="You must enter a city"),i||(s.country="You must enter a country"),o||(s[o]="You must enter an image url."),s}})(me),de=Object(o.b)(null,{signUp:function(e){var t=e.email,n=e.username,a=e.password,r=e.confirmPassword,c=e.city,i=e.country,o=e.image_url;return function(){var e=Object(N.a)(O.a.mark(function e(s){var u,l;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u={},a!==r){e.next=16;break}return e.prev=2,e.next=5,j.post("/api/v1/users",{user:{email:t,username:n,password:a,city:c,country:i,image_url:o},headers:{"Content-Type":"application/json"}});case 5:u=e.sent,l=u.data,localStorage.token=l.jwt,_()("Success!","Your account has been successfully created. You will now be redirected to the main page.","success"),k.push("/main"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),u={error:e.t0.message},_()("Account creation failed.","".concat(u.error),"error");case 16:s({type:"SIGN_UP",payload:l});case 17:case"end":return e.stop()}},e,this,[[2,12]])}));return function(t){return e.apply(this,arguments)}}()}})(pe),ve=(n(240),function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){localStorage.token&&this.props.getUserInfo()}},{key:"render",value:function(){return r.a.createElement(g.a,{history:k},r.a.createElement("div",{className:"main"},r.a.createElement("div",{className:"ui container"},r.a.createElement(R,null),r.a.createElement(b.a,null,r.a.createElement(f.a,{path:"/main",exact:!0,component:ce}),r.a.createElement(f.a,{path:"/login",component:se,exact:!0}),r.a.createElement(f.a,{path:"/about",component:ue,exact:!0}),r.a.createElement(f.a,{path:"/contact",component:le}),r.a.createElement(f.a,{path:"/signup",component:de}),r.a.createElement(f.a,{path:"/",component:ue})))))}}]),t}(a.Component)),ge=Object(o.b)(function(e){return{isSignedIn:e.auth.isSignedIn}},{getUserInfo:function(){return function(){var e=Object(N.a)(O.a.mark(function e(t){var n,a,r;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.token,a={},e.prev=2,e.next=5,j.get("/api/v1/profile",{headers:{Authorization:"Bearer ".concat(n)}});case 5:a=e.sent,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),a={error:e.t0.message},_()("Invalid credentials","Invalid username and/or password. Please try again.","error");case 12:r=a.data.user,t({type:"GET_USER_INFO",payload:r}),k.push("/main");case 15:case"end":return e.stop()}},e,this,[[2,8]])}));return function(t){return e.apply(this,arguments)}}()}})(ve),be=n(246),fe={isSignedIn:!1,currentUser:null,loginError:null,jwtToken:null},he={isEditing:!1,isViewingAllUsers:!1,isStartingMeeting:!1,enteredRoom:!1,isViewingInvites:!1,isViewingAddressBook:!1,isViewingSendInviteForm:!1,isViewingAddContacts:!1,inviteReceiver:null,inviteMessage:"",inviteRoomName:null,allUsers:null},Ee=Object(s.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0,n=t.payload||"",a=n.jwt,r=n.user;switch(t.type){case"LOGIN":return Object(E.a)({},e,{currentUser:r,jwtToken:a,isSignedIn:!0});case"LOGOUT":return Object(E.a)({},fe);case"SIGN_UP":return Object(E.a)({},e,{currentUser:r,jwtToken:a,isSignedIn:!0});case"GET_USER_INFO":return Object(E.a)({},e,{currentUser:t.payload,jwtToken:localStorage.token,isSignedIn:!0});default:return e}},form:be.a,content:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0,n=e.inviteReceiver,a=e.inviteMessage,r=e.inviteRoomName,c=Object(E.a)({},e,{inviteReceiver:n,inviteMessage:a,inviteRoomName:r});switch(t.type){case"IS_EDIT_PROFILE":var i=!e.isEditing;return Object(E.a)({},c,{isEditing:i});case"SUBMIT_PROFILE_CHANGES":return Object(E.a)({},he);case"TOGGLE_SHOW_INVITES":var o=!e.isViewingInvites;return Object(E.a)({},c,{isViewingInvites:o});case"START_MEETING":return Object(E.a)({},c,{isStartingMeeting:!0});case"END_MEETING":return Object(E.a)({},c,{isStartingMeeting:!1});case"TOGGLE_VIEW_ADDRESS_BOOK":var s=!e.isViewingAddressBook;return Object(E.a)({},c,{isViewingAddressBook:s});case"TOGGLE_SEND_INVITE_FORM":var u=!e.isViewingSendInviteForm;return Object(E.a)({},he,{isViewingSendInviteForm:u,inviteReceiver:n});case"SET_INVITE_RECEIVER":return Object(E.a)({},c,{inviteReceiver:t.payload});case"TOGGLE_ADD_CONTACTS":var l=!e.isViewingAddContacts;return Object(E.a)({},he,{isViewingAddContacts:l});case"SET_ALL_USERS":var m=t.payload;return Object(E.a)({},e,{allUsers:m});default:return e}}}),ye=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,Oe=Object(s.e)(Ee,ye(Object(s.a)(u.a)));i.a.render(r.a.createElement(o.a,{store:Oe},r.a.createElement(ge,null)),document.querySelector("#root"))}},[[110,1,2]]]);
//# sourceMappingURL=main.3f525030.chunk.js.map