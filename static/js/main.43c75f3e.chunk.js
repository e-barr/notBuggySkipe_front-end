(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,n){e.exports=n(30)},23:function(e,t,n){},27:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(16),i=n.n(o),s=(n(23),n(34)),c=n(33),l=n(2),u=n(3),m=n(5),p=n(4),h=n(6),d=n(31),f=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{id:"header-wrapper"},a.a.createElement("div",{id:"header",className:"container"},a.a.createElement("div",{id:"logo"},a.a.createElement("h1",null,a.a.createElement(d.a,{to:"/login"},"NotBuggySkipe"))),a.a.createElement("div",{id:"menu"},a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement(d.a,{to:"/login",style:{weight:"bold"}},"Login")),a.a.createElement("li",null,a.a.createElement(d.a,{to:"/signup"},"Signup")),a.a.createElement("li",null,a.a.createElement(d.a,{to:"/about"},"About")),a.a.createElement("li",null,a.a.createElement(d.a,{to:"/contact"},"Contact Us"))))))}}]),t}(r.Component),v=function(e){return a.a.createElement("div",null,e.children)},g=function(e){return a.a.createElement("div",null,a.a.createElement(f,null),a.a.createElement(v,null,e.children))},E=n(10),b=n(11),y=(n(27),function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.login,n=e.handleChange;return a.a.createElement("div",{className:"login-form"},a.a.createElement("h2",null,"Login"),a.a.createElement("form",{onSubmit:t},a.a.createElement("input",{type:"text",placeholder:"username",name:"username",onChange:n}),a.a.createElement("input",{type:"password",placeholder:"password",name:"password",onChange:n}),a.a.createElement("button",{className:"button button-alt intro-button"},"Login")))}}]),t}(r.Component)),C=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.user,t=e.username,n=e.city,r=e.country,o=e.email,i=e.image_url;return a.a.createElement("div",{className:"profile-tile"},a.a.createElement("div",null,a.a.createElement("h2",null,a.a.createElement("img",{src:i,width:"10%",height:"10%",alt:"user profile"}),t),a.a.createElement("ul",null,n,", ",r),a.a.createElement("ul",null,o),a.a.createElement("button",{className:"button button-alt",onClick:this.props.editUser},"Edit"),a.a.createElement("button",{className:"button button-alt",onClick:this.props.logout},"Logout")))}}]),t}(r.Component),j=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"meeting-rooms-tile"},"INVITES",a.a.createElement("div",null,a.a.createElement("h4",null,"Inbox"),this.props.receivedInvites.length>0?a.a.createElement("div",null,this.props.receivedInvites.map(function(t){return a.a.createElement("p",{key:t.id},"from: ",a.a.createElement("strong",null,t.sender.username)," location: ",a.a.createElement("strong",null,t.room.name),a.a.createElement("button",{onClick:function(){return e.props.onSelectRoom(t.room)},className:"add"},"ENTER"),a.a.createElement("button",{onClick:function(){return e.props.deleteInvite(t.id,e.props.currentUserId)},className:"delete"},"DELETE"))}),"..."):a.a.createElement("div",null,"You have not received any invites.")),a.a.createElement("div",null,a.a.createElement("h4",null,"Sent"),this.props.sentInvites.length>0?a.a.createElement("div",null,this.props.sentInvites.map(function(t){return a.a.createElement("p",{key:t.id},a.a.createElement("strong",null,"to: ",t.receiver.username)," room: ",a.a.createElement("strong",null,t.room.name),a.a.createElement("button",{onClick:function(){return e.props.onSelectRoom(t.room)},className:"add"},"ENTER"),a.a.createElement("button",{onClick:function(){return e.props.deleteInvite(t.id,e.props.currentUserId)},className:"delete"},"DELETE"))})):a.a.createElement("div",null,"You have not sent any invites.")))}}]),t}(r.Component),I=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.viewUsers,n=e.contacts,r=e.removeContact,o=e.createInvite,i=e.currentUserId;return a.a.createElement("div",{className:"contacts-tile"},a.a.createElement("p",null,"ADDRESS BOOK"),a.a.createElement("button",{onClick:t,className:"view"},"VIEW NEW CONTACTS"),n.length>0?a.a.createElement("div",null,n.map(function(e){return a.a.createElement("li",{key:e.id},e.user_2.username,a.a.createElement("button",{onClick:function(){return o(i,e.user_2.id,e.user_2.username)},className:"add"},"SEND INVITE"),a.a.createElement("button",{onClick:function(){return r(e.id)},className:"delete"},"DELETE"))})):a.a.createElement("p",null,"You currently have no contacts."))}}]),t}(r.Component),O=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return console.log(this.props),a.a.createElement("div",{className:"meeting-room-display-tile"},a.a.createElement("p",null,"Room Name: ",this.props.selectedRoom.name),this.props.meetingId===this.props.selectedRoom.id?a.a.createElement("button",{onClick:this.props.leaveMeeting,className:"delete"},"LEAVE MEETING"):a.a.createElement("button",{onClick:function(){return e.props.addMeetingId(e.props.selectedRoom.id)},className:"add"},"JOIN"))}}]),t}(r.Component),U=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return this.props.room?a.a.createElement("div",null,a.a.createElement("h3",null,this.props.room.name),a.a.createElement("p",null,a.a.createElement("iframe",{title:this.props.room.name,src:"https://tokbox.com/embed/embed/ot-embed.js?embedId=cb6af7f6-5ac4-4691-9850-07636964bfb7&room=".concat(this.props.room.name,"&iframe=true"),width:"80%",height:"720px",allow:"microphone; camera"}))):a.a.createElement("div",null,"Please join a meeting room before entering.")}}]),t}(r.Component),S=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).state={email:n.props.user.email,username:n.props.user.username,city:n.props.user.city,country:n.props.user.country,image_url:n.props.user.image_url,id:n.props.user.id},n.onChange=function(e){n.setState(Object(E.a)({},e.target.name,e.target.value))},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.closeEditProfile,r=t.profileChangesConfirmed,o=this.state,i=o.image_url,s=o.username,c=o.city,l=o.country,u=o.email;return a.a.createElement("div",{className:"edit-profile-tile"},a.a.createElement("form",{onSubmit:function(){return r(e.state)}},a.a.createElement("p",null,"Image URL",a.a.createElement("input",{type:"text",name:"image_url",value:i,onChange:this.onChange})),a.a.createElement("p",null,"Username",a.a.createElement("input",{type:"text",name:"username",value:s,onChange:this.onChange})),a.a.createElement("p",null,"City",a.a.createElement("input",{type:"text",name:"city",value:c,onChange:this.onChange})),a.a.createElement("p",null,"Country",a.a.createElement("input",{type:"text",name:"country",value:l,onChange:this.onChange})),a.a.createElement("p",null,"Email",a.a.createElement("input",{type:"text",name:"email",value:u,onChange:this.onChange})),a.a.createElement("button",null,"Confirm Changes"),a.a.createElement("button",{onClick:n},"Cancel")))}}]),t}(r.Component),N=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.user.contacts.map(function(e){return e.user_2}),n=this.props.user,r=this.props.allUsers.filter(function(e){return e.id!==n.id}),o=t.map(function(e){return e.id}),i=r.map(function(e){return e.id}).filter(function(e){return!1===o.includes(e)}),s=r.filter(function(e){return i.includes(e.id)}).map(function(t){return a.a.createElement("li",{key:t.id},t.username,a.a.createElement("button",{onClick:function(){return e.props.addContact(n.id,t.id)},className:"add"},"add"))});return a.a.createElement("div",null,"USERS",a.a.createElement("ul",null,s.length>0?s:a.a.createElement("div",null,"All current users are your contacts.")))}}]),t}(r.Component),w=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).state={content:"",room_name:""},n.onChange=function(e){n.setState(Object(E.a)({},e.target.name,e.target.value))},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.closeInviteForm,r=t.receiverName,o=t.sendInvite,i=t.senderId,s=t.receiverId;return a.a.createElement("div",{className:"invite-form-tile"},a.a.createElement("button",{onClick:n},"X"),"INVITE TO: ",r,a.a.createElement("form",null,"Room name: ",a.a.createElement("input",{type:"text",name:"room_name",placeholder:"required",onChange:this.onChange}),"Message:",a.a.createElement("input",{type:"text",name:"content",placeholder:"optional",onChange:this.onChange}),a.a.createElement("button",{onClick:function(){return o(i,s,e.state.content,e.state.room_name)}},"SEND INVITE")))}}]),t}(r.Component),k=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).state={selectedRoom:null},n.onSelectRoom=function(e){n.setState({selectedRoom:e})},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return this.props.currentUser?a.a.createElement("div",null,a.a.createElement("div",{id:"wrapper"},a.a.createElement("div",{id:"three-column",className:"container"},a.a.createElement("div",{className:"title"},this.props.editingProfile?a.a.createElement(S,{profileChangesConfirmed:this.props.profileChangesConfirmed,user:this.props.currentUser,closeEditProfile:this.props.closeEditProfile}):a.a.createElement(C,{user:this.props.currentUser,editUser:this.props.editUser,logout:this.props.logout})),a.a.createElement("div",{className:"boxA"},a.a.createElement(j,{sentInvites:this.props.currentUser.sent_invites,receivedInvites:this.props.currentUser.received_invites,onSelectRoom:this.onSelectRoom,deleteInvite:this.props.deleteInvite,currentUserId:this.props.currentUser.id})),a.a.createElement("div",{className:"boxB"},this.props.creatingInvite?a.a.createElement(w,{closeInviteForm:this.props.closeInviteForm,senderId:this.props.senderId,receiverId:this.props.receiverId,sendInvite:this.props.sendInvite,receiverName:this.props.receiverName}):a.a.createElement(I,{contacts:this.props.currentUser.contacts,removeContact:this.props.removeContact,viewUsers:this.props.viewUsers,createInvite:this.props.createInvite,currentUserId:this.props.currentUser.id})),a.a.createElement("div",{className:"boxC"},this.props.viewingUsers?a.a.createElement(N,{allUsers:this.props.allUsers,user:this.props.currentUser,addContact:this.props.addContact}):null)),a.a.createElement("div",{id:"welcome"},this.state.selectedRoom?a.a.createElement(O,{selectedRoom:this.state.selectedRoom,addMeetingId:this.props.addMeetingId,meetingId:this.props.currentUser.meeting_id,leaveMeeting:this.props.leaveMeeting}):a.a.createElement("div",null,"Please select a meeting room to see further details."),a.a.createElement("div",{className:"container"},this.props.currentUser&&this.props.currentUser.meeting_id?a.a.createElement(U,{style:{height:"100px"},room:this.props.currentUser.meeting_room}):null)))):a.a.createElement("div",null,"Hi")}}]),t}(r.Component),T=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).state={username:"",password:"",currentUser:null,loginError:null,editingProfile:!1,viewingUsers:!1,allUsers:[],creatingInvite:!1,senderId:null,receiverId:null,receiverName:null},n.sendInvite=function(e,t,r,a){fetch("http://localhost:3000/api/v1/invites",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.token)},body:JSON.stringify({invite:{sender_id:e,receiver_id:t,room_name:a,content:r}})}).then(function(e){return e.json()}).then(function(e){return n.setState({currentUser:e.user})}),n.setState({creatingInvite:!1,senderId:null,receiverId:null})},n.createInvite=function(e,t,r){n.setState({creatingInvite:!0,senderId:e,receiverId:t,receiverName:r})},n.closeInviteForm=function(){n.setState({creatingInvite:!1})},n.deleteInvite=function(e,t){fetch("http://localhost:3000/api/v1/invites",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.token)},body:JSON.stringify({invite:{id:e,user_id:t}})}).then(function(e){return e.json()}).then(function(e){return n.setState({currentUser:e.user})}).then(function(e){return console.log(n.state.currentUser)})},n.addContact=function(e,t){fetch("http://localhost:3000/api/v1/contacts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.token)},body:JSON.stringify({contact:{user_1_id:e,user_2_id:t}})}).then(function(e){return e.json()}).then(function(e){return n.setState({currentUser:e.user})}).then(function(e){return console.log(n.state.currentUser)})},n.viewUsers=function(){n.state.viewingUsers?n.setState({viewingUsers:!1}):(n.setState({viewingUsers:!0}),fetch("http://localhost:3000/api/v1/users",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.token)}}).then(function(e){return e.json()}).then(function(e){return n.setState({allUsers:e})}))},n.removeContact=function(e){fetch("http://localhost:3000/api/v1/contacts",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.token)},body:JSON.stringify({contact:{id:e}})}).then(function(e){return e.json()}).then(function(e){return n.setState({currentUser:e.user})}).then(function(e){return console.log(n.state.currentUser)})},n.logout=function(e){var t=Object(b.a)({},n.state.currentUser);fetch("http://localhost:3000/api/v1/profile",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.token)},body:JSON.stringify({user:Object(b.a)({},t,{meeting_id:null})})}),n.setState({editingProfile:!1}),n.setState({username:"",password:"",currentUser:null,loginError:null,editingProfile:!1}),n.props.history.push("/login"),localStorage.clear()},n.editUser=function(e){e.preventDefault(),n.setState({editingProfile:!0})},n.closeEditProfile=function(){n.setState({editingProfile:!1})},n.profileChangesConfirmed=function(e){var t=e.email,r=e.username,a=e.city,o=e.country,i=e.image_url,s=(e.id,Object(b.a)({},n.state.currentUser,{email:t,username:r,city:a,country:o,image_url:i}));fetch("http://localhost:3000/api/v1/profile",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.token)},body:JSON.stringify({user:Object(b.a)({},s,{id:s.id})})}).then(function(e){return e.json()}).then(function(e){return n.setState({currentUser:e.user})}).then(function(e){return console.log(n.state.currentUser)}),n.setState({editingProfile:!1})},n.addMeetingId=function(e){if(n.state.currentUser.meeting_id)alert("You may only be in one meeting at a time. Please exit your current meeting before joining another one.");else{var t=Object(b.a)({},n.state.currentUser,{meeting_id:e});n.setState({currentUser:t},function(){fetch("http://localhost:3000/api/v1/profile",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.token)},body:JSON.stringify({user:Object(b.a)({},t,{id:t.id})})}).then(function(e){return e.json()}).then(function(e){return n.setState({currentUser:e.user})}).then(function(e){return console.log(n.state.currentUser)})})}},n.leaveMeeting=function(){if(n.state.currentUser.meeting_id){var e=Object(b.a)({},n.state.currentUser,{meeting_id:null});n.setState({currentUser:e},function(){fetch("http://localhost:3000/api/v1/profile",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.token)},body:JSON.stringify({user:Object(b.a)({},e,{id:e.id})})}).then(function(e){return e.json()}).then(function(e){return n.setState({currentUser:e.user})}).then(console.log("".concat(n.state.currentUser.username," has left"),n.state.currentUser))})}else alert("You are currently not in a meeting. Please join a group to leave.")},n.handleChange=function(e){n.setState(Object(E.a)({},e.target.name,e.target.value))},n.login=function(e){e.preventDefault(),fetch("http://localhost:3000/api/v1/login",{method:"POST",body:JSON.stringify({user:{username:n.state.username,password:n.state.password}}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){e.error?n.setState({loginError:e.error}):(localStorage.token=e.jwt,n.setState({currentUser:e.user}))})},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.token;fetch("http://localhost:3000/api/v1/profile",{method:"GET",headers:{Authorization:"Bearer ".concat(t)}}).then(function(e){return e.json()}).then(function(t){t.error||e.setState({currentUser:t.user})})}},{key:"render",value:function(){return this.state.currentUser?a.a.createElement("div",null,a.a.createElement(k,{currentUser:this.state.currentUser,logout:this.logout,addMeetingId:this.addMeetingId,leaveMeeting:this.leaveMeeting,editingProfile:this.state.editingProfile,closeEditProfile:this.closeEditProfile,editUser:this.editUser,profileChangesConfirmed:this.profileChangesConfirmed,removeContact:this.removeContact,viewUsers:this.viewUsers,allUsers:this.state.allUsers,viewingUsers:this.state.viewingUsers,addContact:this.addContact,deleteInvite:this.deleteInvite,creatingInvite:this.state.creatingInvite,createInvite:this.createInvite,closeInviteForm:this.closeInviteForm,setSenderIdReceiverId:this.setSenderIdReceiverId,senderId:this.state.senderId,receiverId:this.state.receiverId,sendInvite:this.sendInvite,receiverName:this.state.receiverName})):a.a.createElement(y,{login:this.login,handleChange:this.handleChange})}}]),t}(r.Component),_=function(e){return a.a.createElement("div",null,a.a.createElement("div",{className:"about-tile"},a.a.createElement("h4",null,"This is a demo video chat app, created by ",a.a.createElement("a",{href:"https://github.com/e-barr"},"e-barr"))))},P=function(e){return a.a.createElement("div",{className:"contact-us-tile"},a.a.createElement("h4",null,"If you have any questions, please feel free to contact me at ",a.a.createElement("a",{href:"https://github.com/e-barr"},"e-barr")))},x=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).state={email:"",username:"",password:"",confirmPassword:"",city:"",country:"",image_url:""},n.onChangeInput=function(e){n.setState(Object(E.a)({},e.target.name,e.target.value))},n.onSubmitSignUpForm=function(e,t){e.preventDefault(),t.password===t.confirmPassword&&fetch("http://localhost:3000/api/v1/users",{method:"POST",body:JSON.stringify({user:{email:t.email,username:t.username,password:t.password,city:t.city,country:t.country,image_url:t.image_url}}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){e.error?alert(e.error):(alert("Your account has successfully been created! You will now be redirected to the login page."),n.props.history.push("/"))})},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"signup-form"},a.a.createElement("h2",null,"Sign Up"),a.a.createElement("form",{onSubmit:function(t){return e.onSubmitSignUpForm(t,e.state)}},a.a.createElement("p",null,"Email: ",a.a.createElement("input",{type:"text",name:"email",onChange:this.onChangeInput})),a.a.createElement("p",null,"Username: ",a.a.createElement("input",{type:"text",name:"username",onChange:this.onChangeInput})),a.a.createElement("p",null,"Password: ",a.a.createElement("input",{type:"password",name:"password",onChange:this.onChangeInput})),a.a.createElement("p",null,"Confirm password: ",a.a.createElement("input",{type:"password",name:"confirmPassword",onChange:this.onChangeInput})),a.a.createElement("p",null,"City: ",a.a.createElement("input",{type:"text",name:"city",onChange:this.onChangeInput})),a.a.createElement("p",null,"Country: ",a.a.createElement("input",{type:"text",name:"country",onChange:this.onChangeInput})),a.a.createElement("p",null,"Image URL: ",a.a.createElement("input",{type:"text",name:"image_url",onChange:this.onChangeInput})),a.a.createElement("button",{className:"button button-alt intro-button"},"Continue")))}}]),t}(r.Component),A=function(){return a.a.createElement(g,null,a.a.createElement(s.a,null,a.a.createElement(c.a,{path:"/",component:T,exact:!0}),a.a.createElement(c.a,{path:"/signup",component:x,exact:!0}),a.a.createElement(c.a,{path:"/login",component:T,exact:!0}),a.a.createElement(c.a,{path:"/about",component:_,exact:!0}),a.a.createElement(c.a,{path:"/contact",component:P})))},R=n(32);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(R.a,null,a.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[18,2,1]]]);
//# sourceMappingURL=main.43c75f3e.chunk.js.map